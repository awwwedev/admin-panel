(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18c8dea4"],{3855:function(e,t,a){"use strict";var n=a("5530"),r=a("d4ec"),i=a("bee2"),l=a("262e"),s=a("2caf"),c=(a("d3b7"),a("3949"),a("c873")),o=a("72df"),u=function(e){Object(l["a"])(a,e);var t=Object(s["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,null,[{key:"get",value:function(e){return c["a"].get("equipment/"+e.id,{params:e})}},{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c["a"].get("equipment",{params:e})}},{key:"create",value:function(e){return c["a"].post("equipment",a.prepareFormData(e))}},{key:"update",value:function(e){return c["a"].post("equipment/"+e.id,a.prepareFormData(Object(n["a"])(Object(n["a"])({},e),{},{_method:"PUT"})))}},{key:"destroy",value:function(e){return c["a"].delete("equipment",{params:{id:e}})}}]),a}(o["a"]);t["a"]=u},"3ccd":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("5530"),r=a("d4ec"),i=a("bee2"),l=a("262e"),s=a("2caf"),c=(a("d3b7"),a("3949"),a("c873")),o=a("72df"),u=function(e){Object(l["a"])(a,e);var t=Object(s["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,null,[{key:"getMinMax",value:function(){return c["a"].get("realty/minMax")}},{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c["a"].get("realty",{params:e})}},{key:"getListMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c["a"].get("realty/map",{params:e})}},{key:"get",value:function(e){return c["a"].get("realty/"+e.id,{params:e})}},{key:"count",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c["a"].get("realty/count",{params:e})}},{key:"create",value:function(e){return c["a"].post("realty",a.prepareFormData(e))}},{key:"update",value:function(e){return c["a"].post("realty/"+e.id,a.prepareFormData(Object(n["a"])(Object(n["a"])({},e),{},{_method:"PUT"})))}},{key:"destroy",value:function(e){return c["a"].delete("realty",{params:{id:e}})}}]),a}(o["a"])},"5ffc":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("EntityIndexPageLayout",{ref:"EntityIndexPageLayout",attrs:{columns:e.columns,items:e.items,"page-title":"Недвижимости","with-paginate":"","selected-all-rows":e.selectedAllRows,selected:e.selected,"route-name-change":"admin.realty.change","route-name-create":"admin.realty.create","in-request-state":e.inRequestState,"table-info":e.tableInfo,"table-temp":e.tableTemp,"update-items-collback":e.updateTableData,"items-count-info":e.itemsCountInfo,"table-options":e.tableOptions},on:{deleteItem:e.onDelete,changeSort:e.onChangeSort,selectAll:e.onSelectAll,rowSelected:e.onRowSelected,search:e.onSearch},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){var n=t.rowSelected;return[n?[a("span",[e._v("✓")])]:[a("span")]]}},{key:"cell(img_path)",fn:function(t){var n=t.item;return[a("b-img",{attrs:{fluid:"",width:"150",src:e.basePath+n.img_path}})]}},{key:"cell(is_published)",fn:function(t){var n=t.item;return[n.is_published?a("b-badge",{attrs:{variant:"success"}},[e._v("Опубликовано")]):a("b-badge",{attrs:{variant:"danger"}},[e._v("Неопубликовано")])]}},{key:"cell(name)",fn:function(t){var n=t.item;return[a("b-link",{attrs:{to:{name:"admin.realty.change",params:{id:n.id}}},domProps:{innerHTML:e._s(n.name)}})]}},{key:"filters",fn:function(){return[a("b-form",{staticClass:"mb-3",on:{submit:function(t){return t.preventDefault(),e.onSearch(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[a("SearchPanel",{attrs:{"without-button-submit":"","without-button-reset":"",columns:e.columns},on:{changedField:function(t){e.tableTemp.searchField=t}},model:{value:e.tableTemp.searchValue,callback:function(t){e.$set(e.tableTemp,"searchValue",t)},expression:"tableTemp.searchValue"}}),a("b-form-group",{attrs:{label:"Комплектация"}},[a("b-form-checkbox-group",e._l(e.equipments,(function(t,n){return a("b-form-checkbox",{key:n,attrs:{value:t.id},model:{value:e.tableOptionsRealty.equipments,callback:function(t){e.$set(e.tableOptionsRealty,"equipments",t)},expression:"tableOptionsRealty.equipments"}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("b-form-group",{attrs:{label:"Тип"}},[a("b-form-checkbox-group",e._l(e.types,(function(t,n){return a("b-form-checkbox",{key:n,attrs:{value:t.id},model:{value:e.tableOptionsRealty.types,callback:function(t){e.$set(e.tableOptionsRealty,"types",t)},expression:"tableOptionsRealty.types"}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("b-form-group",{attrs:{label:"Стоимость (руб.)",description:e.tableOptionsRealty.priceMin+" / "+e.realtyMinMax.priceMax}},[a("b-input",{attrs:{type:"range",min:e.realtyMinMax.priceMin,max:e.realtyMinMax.priceMax},model:{value:e.tableOptionsRealty.priceMin,callback:function(t){e.$set(e.tableOptionsRealty,"priceMin",t)},expression:"tableOptionsRealty.priceMin"}})],1),a("b-form-group",{attrs:{label:"Площадь (м. кв.)",description:e.tableOptionsRealty.areaMin+" / "+e.realtyMinMax.areaMax}},[a("b-input",{attrs:{type:"range",min:e.realtyMinMax.areaMin,max:e.realtyMinMax.areaMax},model:{value:e.tableOptionsRealty.areaMin,callback:function(t){e.$set(e.tableOptionsRealty,"areaMin",t)},expression:"tableOptionsRealty.areaMin"}})],1),a("b-form-group",{attrs:{label:"Стоимость за м. кв. (руб. / м. кв.)",description:e.tableOptionsRealty.pricePerMetrMin+" / "+e.realtyMinMax.pricePerMetrMax}},[a("b-input",{attrs:{type:"range",min:e.realtyMinMax.pricePerMetrMin,max:e.realtyMinMax.pricePerMetrMax},model:{value:e.tableOptionsRealty.pricePerMetrMin,callback:function(t){e.$set(e.tableOptionsRealty,"pricePerMetrMin",t)},expression:"tableOptionsRealty.pricePerMetrMin"}})],1),a("b-button",{staticClass:"mr-1",attrs:{variant:"outline-primary",type:"submit"}},[e._v("Найти")]),a("b-button",{attrs:{variant:"outline-danger",type:"reset"}},[e._v("Сбросить")])],1)]},proxy:!0}])})},r=[],i=a("5530"),l=a("d4ec"),s=a("bee2"),c=a("262e"),o=a("2caf"),u=(a("d81d"),a("9ab4")),p=a("1b40"),b=a("3ccd"),y=a("f39e"),d=a("affa"),m=a("6fc5"),f=a("37c5"),h=a("3855"),M=a("de84"),v=a("d79d"),O=a("eafb"),g=a("e7a9"),k=a("4a70"),x=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.showConfirmModal=!1,e.columns=[{key:"selected",label:""},{key:"img_path",label:""},{key:"name",label:"Описание",searchable:!0,sortable:!0},{key:"realtyTypeName",label:"Тип"},{key:"area",label:"Площадь",sortable:!0,searchable:!0},{key:"price",label:"Стоимость (руб.)",sortable:!0,searchable:!0},{key:"discount_sum",label:"Скидка (руб.)",sortable:!0,searchable:!0},{key:"price_per_metr",label:"Стоимость за м. кв.",sortable:!0,searchable:!0},{key:"is_published",label:"Статус",sortable:!0},{key:"updated_at",label:"Изменен",sortable:!0},{key:"created_at",label:"Создан",sortable:!0}],e.items=[],e.tableOptionsRealty={equipments:[],types:[],areaMin:null,priceMin:null,pricePerMetrMin:null},e.realtyMinMax={},e.equipments=[],e.types=[],e}return Object(s["a"])(a,[{key:"onDelete",value:function(){var e=this;b["a"].destroy(this.selected.map((function(e){return e.id}))).then((function(){Object(m["e"])(f["a"],e.$store).setData({title:"Удаление прошло успешно",variant:"success"}),e.updateTableData()}))}},{key:"updateTableData",value:function(){var e=this;return this.$table&&(this.$table.clearSelected(),this.selectedAllRows=!1),b["a"].getList(this.tableOptionsCleared).then((function(t){return e.items=t.data.data,t}))}},{key:"onSearch",value:function(){this.tableOptions=Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.tableOptions),this.tableOptionsRealty),{},{page:1,searchField:this.tableTemp.searchField,searchValue:this.tableTemp.searchValue})}},{key:"onReset",value:function(){this.tableOptionsRealty.priceMin=this.realtyMinMax.priceMin,this.tableOptionsRealty.areaMin=this.realtyMinMax.areaMin,this.tableOptionsRealty.pricePerMetrMin=this.realtyMinMax.pricePerMetrMin,this.tableOptionsRealty.equipments=[],this.tableOptionsRealty.types=[],this.tableTemp.searchValue="",this.onSearch()}},{key:"created",value:function(){var e=this;h["a"].getList().then((function(t){e.equipments=t.data})),M["a"].getList().then((function(t){e.types=t.data})),b["a"].getMinMax().then((function(t){e.realtyMinMax=t.data,e.tableOptionsRealty.priceMin=e.realtyMinMax.priceMin,e.tableOptionsRealty.areaMin=e.realtyMinMax.areaMin,e.tableOptionsRealty.pricePerMetrMin=e.realtyMinMax.pricePerMetrMin}))}},{key:"mounted",value:function(){this.$table=this.$refLayout.$table}}]),a}(Object(p["e"])(y["a"],d["a"]));Object(u["a"])([Object(p["c"])("basePath")],x.prototype,"basePath",void 0),x=Object(u["a"])([Object(p["a"])({components:{EntityIndexPageLayout:k["a"],ModalDeletingConfirm:g["a"],SearchPanel:O["a"],ItemsCountInfo:v["a"]}})],x);var R=x,j=R,_=a("2877"),P=Object(_["a"])(j,n,r,!1,null,"5d730d0f",null);t["default"]=P.exports},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,i=a("1dde"),l=i("map");n({target:"Array",proto:!0,forced:!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},de84:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("5530"),r=a("d4ec"),i=a("bee2"),l=a("262e"),s=a("2caf"),c=(a("d3b7"),a("3949"),a("c873")),o=a("72df"),u=function(e){Object(l["a"])(a,e);var t=Object(s["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a,null,[{key:"get",value:function(e){return c["a"].get("realtyType/"+e.id,{params:e})}},{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c["a"].get("realtyType",{params:e})}},{key:"create",value:function(e){return c["a"].post("realtyType",a.prepareFormData(e))}},{key:"update",value:function(e){return c["a"].post("realtyType/"+e.id,a.prepareFormData(Object(n["a"])(Object(n["a"])({},e),{},{_method:"PUT"})))}},{key:"destroy",value:function(e){return c["a"].delete("realtyType",{params:{id:e}})}}]),a}(o["a"])}}]);
//# sourceMappingURL=chunk-18c8dea4.9f0e7d0d.js.map