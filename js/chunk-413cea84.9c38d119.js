(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-413cea84"],{"6f88":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[a("h1",{staticClass:"mb-5"},[e._v(e._s(e.pageName))]),a("b-nav",{staticClass:"mb-3",attrs:{tabs:""}},[a("b-nav-item",{attrs:{active:0===e.activeTab},on:{click:function(t){e.activeTab=0}}},[e._v(e._s(e.mainTabName))]),a("b-nav-item",{attrs:{active:1===e.activeTab},on:{click:function(t){e.activeTab=1}}},[e._v("Предпросмотр карточек")])],1),0===e.activeTab?a("b-form",[a("Dates",{attrs:{"form-data":e.formData}}),a("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Основное"}},[a("b-form-group",{attrs:{label:"Заголовок","label-for":"header","invalid-feedback":e.getValidationMessage(e.$v.formData.header)}},[a("b-form-input",{attrs:{id:"header",state:e.getFieldState(e.$v.formData.header)},model:{value:e.formData.header,callback:function(t){e.$set(e.formData,"header","string"===typeof t?t.trim():t)},expression:"formData.header"}})],1),a("b-form-group",{attrs:{label:"Краткое описание","label-for":"short_description","invalid-feedback":e.getValidationMessage(e.$v.formData.short_description)}},[a("b-textarea",{attrs:{id:"short_description",state:e.getFieldState(e.$v.formData.short_description)},model:{value:e.formData.short_description,callback:function(t){e.$set(e.formData,"short_description","string"===typeof t?t.trim():t)},expression:"formData.short_description"}})],1),a("b-form-group",{attrs:{label:"Описание","label-for":"description","invalid-feedback":e.getValidationMessage(e.$v.formData.content)}},[a("vue-editor",{staticClass:"text-editor",class:{"is-invalid":e.$v.formData.content.$error},attrs:{id:"textarea","editor-toolbar":e.customToolbar},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content","string"===typeof t?t.trim():t)},expression:"formData.content"}})],1)],1),a("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Основное изображение"}},[a("UploadedImage",{attrs:{image:e.formData.photo},on:{imageInitialized:function(t){e.temp.previewImagePath=t}}}),a("b-form-group",{attrs:{"label-for":"img_path","invalid-feedback":e.getValidationMessage(e.$v.formData.photo)}},[a("b-file",{attrs:{"browse-text":"Обзор...",id:"img_path",state:e.getFieldState(e.$v.formData.photo)},scopedSlots:e._u([{key:"placeholder",fn:function(){return[e._v(" Нет файлов ")]},proxy:!0}],null,!1,3920054766),model:{value:e.temp.previewImageModel,callback:function(t){e.$set(e.temp,"previewImageModel",t)},expression:"temp.previewImageModel"}})],1)],1),a("ConstructorActions",{attrs:{"cancel-to":{name:"admin.news"},"is-create-page":e.isCreatePage},on:{submit:e.onSubmit}})],1):1===e.activeTab?a("PreviewTab",{attrs:{"form-data":e.formData}}):e._e()],1)},i=[],n=a("d4ec"),o=a("bee2"),s=a("262e"),c=a("2caf"),d=(a("a9e3"),a("9ab4")),l=a("1b40"),u=a("bf19"),m=a("1dce"),p=a("c67c"),f=a("b5ae"),b=a("c3e5"),h=a("0763"),v=a("fa10"),g=a("6fc5"),_=a("37c5"),j=a("5873"),O=a("5732"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("b-card",{staticClass:"shadow-sm mb-3",attrs:{header:"Слайдер"}},[a("NewsSlide",{attrs:{id:e.formData.id,photo:e.formData.photo,header:e.formData.header,content:e.formData.short_description}})],1),a("b-card",{staticClass:"shadow-sm mb-3 ",attrs:{header:"Карточка"}},[a("NewsCard",{staticStyle:{width:"400px",height:"300px"},attrs:{id:e.formData.id,"img-path":e.formData.photo,name:e.formData.header,content:e.formData.short_description}})],1)],1)},y=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"slide"},[a("div",{staticClass:"slide__flex-wrapper flex-wrapper"},[a("ibg",{staticClass:"slide__img",attrs:{src:e.basePath+e.photo}}),a("div",{staticClass:"slide__body"},[a("h3",{staticClass:"slide__title"},[e._v(e._s(e.header))]),a("p",{staticClass:"slide__text",domProps:{innerHTML:e._s(e.content)}})])],1)])},k=[],C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ibg",style:{"background-image":"url('"+e.src+"')"},on:{click:function(t){return e.$emit("click")}}})},$=[],x=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return a}(l["j"]);x=Object(d["a"])([Object(l["a"])({props:{src:{type:String,required:!0}}})],x);var I=x,P=I,q=(a("a444"),a("2877")),N=Object(q["a"])(P,C,$,!1,null,"459ba58d",null),T=N.exports,M=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return a}(l["j"]);Object(d["a"])([Object(l["c"])("basePath")],M.prototype,"basePath",void 0),M=Object(d["a"])([Object(l["a"])({components:{Ibg:T},props:{id:{type:Number,required:!0},content:{type:String,required:!0},photo:{type:String,required:!0},header:{type:String,required:!0}}})],M);var S=M,H=S,F=(a("fcfb"),Object(q["a"])(H,D,k,!1,null,"3c65dc1a",null)),V=F.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"news",on:{mouseenter:function(t){e.isHovered=!0},mouseleave:function(t){e.isHovered=!1}}},[a("router-link",{staticClass:"news__link",attrs:{to:{name:"news.view",params:{id:e.id}}}},[e._v(e._s(e.name))]),a("div",{staticClass:"news__content-wrapper"},[a("ibg",{staticClass:"news__img",attrs:{src:e.imgPath}}),a("div",{ref:"name",staticClass:"news__name"},[a("div",{ref:"name-value",staticClass:"news__name-value"},[a("span",[e._v(e._s(e.slicedName+(e.name.length>65?"...":"")))])])])],1)],1)},U=[],A=(a("fb6a"),a("b0c0"),a("7db0"),a("1157")),J=a.n(A),L=(a("5319"),a("ac1f"),function(e){return e.replace(/( |<([^>]+)>)/gi,"")}),z=a("d45f"),B=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.isHovered=!1,e.oldHeight=0,e}return Object(o["a"])(a,[{key:"descriptionValue",get:function(){return L(this.content)}},{key:"mounted",value:function(){this.oldHeight=J()(this.refName).height()}},{key:"slicedName",get:function(){return this.name.slice(0,75)}},{key:"watchIsHovered",value:function(e){var t=this;e?J()(this.refName).stop().animate({height:"100%"},{start:function(){J()(this).css("background-color","rgba(50,161,208,0.8)").find(".news__name-value").animate({opacity:0},{duration:200})},done:function(){J()(this).find(".news__name-value").addClass("news__name-value_big").animate({opacity:1},400).find("span").text(t.content.slice(0,120)+(t.content.length>120?"...":""))}}):J()(this.refName).stop().animate({height:this.oldHeight},{start:function(){J()(this).css("background-color","#32a1d0").find(".news__name-value").animate({opacity:0},{duration:200})},done:function(){var e=this;setTimeout((function(){J()(e).find(".news__name-value").removeClass("news__name-value_big").animate({opacity:1},200).find("span").text(t.slicedName+(t.name.length>65?"...":""))}),200)}})}}]),a}(l["j"]);Object(d["a"])([Object(l["f"])({required:!0})],B.prototype,"name",void 0),Object(d["a"])([Object(l["f"])({required:!0})],B.prototype,"imgPath",void 0),Object(d["a"])([Object(l["f"])({required:!0})],B.prototype,"content",void 0),Object(d["a"])([Object(l["f"])({required:!0})],B.prototype,"id",void 0),Object(d["a"])([Object(l["i"])("name")],B.prototype,"refName",void 0),Object(d["a"])([Object(l["i"])("name-value")],B.prototype,"refNameValue",void 0),Object(d["a"])([Object(l["k"])("isHovered")],B.prototype,"watchIsHovered",null),B=Object(d["a"])([Object(l["a"])({components:{Ibg:z["a"]}})],B);var G=B,K=G,Q=(a("d30f"),Object(q["a"])(K,E,U,!1,null,"5a45f07c",null)),R=Q.exports,W=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return a}(l["j"]);Object(d["a"])([Object(l["f"])({required:!0})],W.prototype,"formData",void 0),W=Object(d["a"])([Object(l["a"])({components:{NewsCard:R,NewsSlide:V}})],W);var X=W,Y=X,Z=Object(q["a"])(Y,w,y,!1,null,"1871d2eb",null),ee=Z.exports,te=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.entityNameCreate="Создание новости",e.entityNameChange="Изменение новости",e.activeTab=0,e.formData={id:null,header:"",content:"",short_description:"",photo:null,created_at:null,updated_at:null},e.temp={previewImagePath:"",previewImageModel:null},e}return Object(o["a"])(a,[{key:"mainTabName",get:function(){return this.$route.meta.isCreatePage?"Создание":"Редактирование"}},{key:"onSubmit",value:function(){var e,t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$v.$touch(),this.$v.$invalid?Object(g["e"])(_["a"],this.$store).setData({title:"Ошибка валидации!",text:"Проверте корректность и запоолненость полей",variant:"danger"}):(e=this.isCreatePage?v["a"].create(this.formData).then((function(e){Object(g["e"])(_["a"],t.$store).setData({title:"Запись успешно создана",variant:"success"}),t.$router.push({name:"admin.news.change",params:{id:e.data.id}}),t.$v.$reset()})):v["a"].update(this.formData).then((function(e){Object(g["e"])(_["a"],t.$store).setData({title:"Запись успешно изменена",variant:"success"}),t.updateFormData(e.data),t.$v.$reset()})),e.then((function(){a&&t.$router.push({name:"admin.realty"})})))}},{key:"updateFormData",value:function(e){this.temp={previewImageModel:null,previewImagePath:e.photo},this.formData={content:e.content,header:e.header,id:e.id,photo:e.photo,short_description:e.short_description,created_at:e.created_at,updated_at:e.updated_at}}},{key:"watchTempPreviewImageModel",value:function(e){e&&(this.formData.photo=e)}},{key:"watchIsCreatePage",value:function(e){var t=this;e||v["a"].get({id:Number(this.$route.params.id)}).then((function(e){t.updateFormData(e.data)}))}}]),a}(Object(l["e"])(m["validationMixin"],p["a"],u["a"]));Object(d["a"])([Object(l["k"])("temp.previewImageModel")],te.prototype,"watchTempPreviewImageModel",null),Object(d["a"])([Object(l["k"])("$route.meta.isCreatePage",{immediate:!0})],te.prototype,"watchIsCreatePage",null),te=Object(d["a"])([Object(l["a"])({components:{PreviewTab:ee,Dates:O["a"],UploadedImage:h["a"],ConstructorActions:b["a"],VueEditor:j["a"]},validations:{formData:{header:{required:f["required"]},photo:{required:f["required"]},content:{required:f["required"]},short_description:{required:f["required"]}}},data:function(){return{customToolbar:[[{header:[!1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],["clean"]]}}})],te);var ae=te,re=ae,ie=(a("f1a9"),Object(q["a"])(re,r,i,!1,null,"3870379c",null));t["default"]=ie.exports},"7a29":function(e,t,a){},"98c5":function(e,t,a){},a444:function(e,t,a){"use strict";a("a814")},a814:function(e,t,a){},b9f6:function(e,t,a){},d30f:function(e,t,a){"use strict";a("7a29")},f1a9:function(e,t,a){"use strict";a("98c5")},fa10:function(e,t,a){"use strict";var r=a("5530"),i=a("d4ec"),n=a("bee2"),o=a("262e"),s=a("2caf"),c=(a("d3b7"),a("3949"),a("c873")),d=a("72df"),l=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){return Object(i["a"])(this,a),t.apply(this,arguments)}return Object(n["a"])(a,null,[{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1};return c["a"].get("news",{params:e})}},{key:"get",value:function(e){return c["a"].get("news/"+e.id,{params:e})}},{key:"create",value:function(e){return c["a"].post("news",a.prepareFormData(e))}},{key:"update",value:function(e){return c["a"].post("news/"+e.id,a.prepareFormData(Object(r["a"])(Object(r["a"])({},e),{},{_method:"PUT"})))}},{key:"destroy",value:function(e){return c["a"].delete("news",{params:{id:e}})}}]),a}(d["a"]);t["a"]=l},fcfb:function(e,t,a){"use strict";a("b9f6")}}]);
//# sourceMappingURL=chunk-413cea84.9c38d119.js.map