(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb35c150"],{"03b8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section"},[a("h1",{staticClass:"mb-5"},[t._v(t._s(t.pageName))]),a("b-form",[a("Dates",{attrs:{"form-data":t.formData}}),a("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Основное"}},[a("b-form-group",{attrs:{label:"Название","label-for":"name","invalid-feedback":t.getValidationMessage(t.$v.formData.name)}},[a("b-form-input",{attrs:{id:"name",state:t.getFieldState(t.$v.formData.name)},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name","string"===typeof e?e.trim():e)},expression:"formData.name"}})],1),a("b-form-group",{attrs:{label:"Тип","label-for":"type","invalid-feedback":t.getValidationMessage(t.$v.formData.realty_type_id)}},[a("b-select",{attrs:{id:"type",state:t.getFieldState(t.$v.formData.realty_type_id)},model:{value:t.formData.realty_type_id,callback:function(e){t.$set(t.formData,"realty_type_id",e)},expression:"formData.realty_type_id"}},[a("b-select-option",{attrs:{value:null}},[t._v("--- Выберите тип ---")]),t._l(t.types,(function(e,r){return a("b-select-option",{key:r,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)],1)],1),a("ConstructorActions",{attrs:{"cancel-to":{name:"admin.equipment"},"is-create-page":t.isCreatePage},on:{submit:t.onSubmit}})],1)},n=[],i=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),s=(a("b0c0"),a("9ab4")),l=a("1b40"),b=a("bf19"),d=a("1dce"),m=a("c67c"),p=a("b5ae"),f=a("c3e5"),v=a("de84"),y=a("6fc5"),h=a("37c5"),j=a("0763"),O=a("3855"),g=a("5732"),_=function(t){Object(o["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.entityNameCreate="Создание комплектации недвижимости",t.entityNameChange="Изменение комплектации недвижимости",t.types=[],t.formData={id:null,name:"",realty_type_id:null,created_at:null,updated_at:null},t}return Object(c["a"])(a,[{key:"onSubmit",value:function(){var t,e=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$v.$touch(),this.$v.$invalid?Object(y["e"])(h["a"],this.$store).setData({title:"Ошибка валидации!",text:"Проверте корректность и запоолненость полей",variant:"danger"}):(t=this.isCreatePage?O["a"].create(this.formData).then((function(t){Object(y["e"])(h["a"],e.$store).setData({title:"Запись успешно создана",variant:"success"}),e.$router.push({name:"admin.equipment.change",params:{id:t.data.id}}),e.$v.$reset()})):O["a"].update(this.formData).then((function(t){Object(y["e"])(h["a"],e.$store).setData({title:"Запись успешно изменена",variant:"success"}),e.updateFormData(t.data),e.$v.$reset()})),t.then((function(){a&&(e.$route.query.pathAfterSubmit?e.$router.push(e.$route.query.pathAfterSubmit):e.$router.push({name:"admin.equipment"}))})))}},{key:"updateFormData",value:function(t){this.formData={name:t.name,id:t.id,realty_type_id:t.realty_type_id,created_at:t.created_at,updated_at:t.updated_at}}},{key:"created",value:function(){var t=this;v["a"].getList().then((function(e){t.types=e.data}))}},{key:"watchIsCreatePage",value:function(t){var e=this;t||O["a"].get({id:this.$route.params.id}).then((function(t){return e.updateFormData(t.data)}))}}]),a}(Object(l["e"])(d["validationMixin"],m["a"],b["a"]));Object(s["a"])([Object(l["k"])("$route.meta.isCreatePage",{immediate:!0})],_.prototype,"watchIsCreatePage",null),_=Object(s["a"])([Object(l["a"])({components:{Dates:g["a"],UploadedImage:j["a"],ConstructorActions:f["a"]},validations:{formData:{name:{required:p["required"]},realty_type_id:{required:p["required"]}}}})],_);var D=_,k=D,C=a("2877"),$=Object(C["a"])(k,r,n,!1,null,"7df1c656",null);e["default"]=$.exports},"0763":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mx-auto flex-column justify-content-between",class:{"d-flex":!t.image,"d-inline-flex":t.image}},[a("b-img",{staticClass:"mb-2",staticStyle:{"max-height":"400px"},style:["width: "+(t.imagePath?"auto":"100%")],attrs:{src:t.basePath+t.imagePath,thumbnail:"",fluid:"",blank:!t.imagePath,"blank-color":"#777",block:""}}),t.withDelete?a("div",{staticClass:"d-flex justify-content-center"},[a("b-button",{attrs:{variant:"danger"},on:{click:t.onDelete}},[t._v("Удалить")])],1):t._e()],1)},n=[],i=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),s=a("9ab4"),l=a("1b40"),b=function(t){Object(o["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(i["a"])(this,a),t=e.apply(this,arguments),t.imagePath="",t}return Object(c["a"])(a,[{key:"onDelete",value:function(){return this.image}},{key:"omImageInitialized",value:function(){return this.imagePath}},{key:"watchImage",value:function(t){var e=this;if(t instanceof File){var a=new FileReader;a.onload=function(){e.imagePath=a.result,e.omImageInitialized()},a.readAsDataURL(t)}else t&&(this.imagePath=t)}}]),a}(l["j"]);Object(s["a"])([Object(l["c"])("basePath")],b.prototype,"basePath",void 0),Object(s["a"])([Object(l["f"])({required:!0})],b.prototype,"image",void 0),Object(s["a"])([Object(l["f"])({required:!1,default:!1,type:Boolean})],b.prototype,"withDelete",void 0),Object(s["a"])([Object(l["b"])("delete")],b.prototype,"onDelete",null),Object(s["a"])([Object(l["b"])("imageInitialized")],b.prototype,"omImageInitialized",null),Object(s["a"])([Object(l["k"])("image",{immediate:!0})],b.prototype,"watchImage",null),b=Object(s["a"])([Object(l["a"])({})],b);var d=b,m=d,p=a("2877"),f=Object(p["a"])(m,r,n,!1,null,"07f7a63a",null);e["a"]=f.exports},3855:function(t,e,a){"use strict";var r=a("5530"),n=a("d4ec"),i=a("bee2"),c=a("262e"),o=a("2caf"),u=(a("d3b7"),a("3949"),a("c873")),s=a("72df"),l=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(i["a"])(a,null,[{key:"get",value:function(t){return u["a"].get("equipment/"+t.id,{params:t})}},{key:"getList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u["a"].get("equipment",{params:t})}},{key:"create",value:function(t){return u["a"].post("equipment",a.prepareFormData(t))}},{key:"update",value:function(t){return u["a"].post("equipment/"+t.id,a.prepareFormData(Object(r["a"])(Object(r["a"])({},t),{},{_method:"PUT"})))}},{key:"destroy",value:function(t){return u["a"].delete("equipment",{params:{id:t}})}}]),a}(s["a"]);e["a"]=l},5732:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.formData.created_at&&t.formData.updated_at?a("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Дата создания и изменения"}},[a("b-row",{attrs:{"cols-sm":"2","cols-md":"2"}},[a("b-col",[a("b-form-group",{attrs:{label:"Создан",disabled:""}},[a("b-form-input",{attrs:{value:t.formData.created_at}})],1)],1),a("b-col",[a("b-form-group",{attrs:{label:"Изменен",disabled:""}},[a("b-form-input",{attrs:{value:t.formData.updated_at}})],1)],1)],1)],1):t._e()},n=[],i=a("d4ec"),c=a("262e"),o=a("2caf"),u=a("9ab4"),s=a("1b40"),l=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return a}(s["j"]);Object(u["a"])([Object(s["f"])({type:Object,required:!0})],l.prototype,"formData",void 0),l=Object(u["a"])([Object(s["a"])({})],l);var b=l,d=b,m=a("2877"),p=Object(m["a"])(d,r,n,!1,null,"1c1f7d44",null);e["a"]=p.exports},bf19:function(t,e,a){"use strict";var r=a("d4ec"),n=a("bee2"),i=a("262e"),c=a("2caf"),o=a("9ab4"),u=a("1b40"),s=function(t){Object(i["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.entityNameCreate="",t.entityNameChange="",t}return Object(n["a"])(a,[{key:"pageName",get:function(){return this.isCreatePage?this.entityNameCreate:this.entityNameChange}},{key:"isCreatePage",get:function(){return this.$route.meta.isCreatePage}}]),a}(Object(u["e"])());s=Object(o["a"])([u["a"]],s),e["a"]=s},c3e5:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex mb-5"},[t.isCreatePage?[a("b-button",{staticClass:"mr-2",attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.onSubmit(!1)}}},[t._v("Создать")]),a("b-button",{attrs:{to:t.cancelTo,variant:"secondary"}},[t._v("Отмена")])]:[a("b-button",{staticClass:"mr-2",attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v("Сохранить")]),a("b-button",{staticClass:"mr-2",attrs:{variant:"success"},on:{click:function(e){return e.preventDefault(),t.onSubmit(!1)}}},[t._v("Применить")]),t.$route.query.pathToBack?a("b-button",{staticClass:"mr-2",attrs:{to:t.$route.query.pathToBack,variant:"secondary"}},[t._v("Отмена")]):a("b-button",{staticClass:"mr-2",attrs:{to:t.cancelTo,variant:"secondary"}},[t._v("Отмена")])]],2)},n=[],i=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),s=a("9ab4"),l=a("1b40"),b=function(t){Object(o["a"])(a,t);var e=Object(u["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"onSubmit",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t}}]),a}(l["j"]);Object(s["a"])([Object(l["f"])({required:!0,type:Boolean})],b.prototype,"isCreatePage",void 0),Object(s["a"])([Object(l["f"])({required:!0,type:Object})],b.prototype,"cancelTo",void 0),Object(s["a"])([Object(l["b"])("submit")],b.prototype,"onSubmit",null),b=Object(s["a"])([Object(l["a"])({})],b);var d=b,m=d,p=a("2877"),f=Object(p["a"])(m,r,n,!1,null,"1838782e",null);e["a"]=f.exports},de84:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var r=a("5530"),n=a("d4ec"),i=a("bee2"),c=a("262e"),o=a("2caf"),u=(a("d3b7"),a("3949"),a("c873")),s=a("72df"),l=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(i["a"])(a,null,[{key:"get",value:function(t){return u["a"].get("realtyType/"+t.id,{params:t})}},{key:"getList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u["a"].get("realtyType",{params:t})}},{key:"create",value:function(t){return u["a"].post("realtyType",a.prepareFormData(t))}},{key:"update",value:function(t){return u["a"].post("realtyType/"+t.id,a.prepareFormData(Object(r["a"])(Object(r["a"])({},t),{},{_method:"PUT"})))}},{key:"destroy",value:function(t){return u["a"].delete("realtyType",{params:{id:t}})}}]),a}(s["a"])}}]);
//# sourceMappingURL=chunk-fb35c150.c045bb58.js.map