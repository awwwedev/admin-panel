(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-019b0b44"],{"948e":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"section"},[t("h1",{staticClass:"mb-5"},[e._v(e._s(e.pageName))]),t("b-form",[t("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Основное"}},[t("b-form-group",{attrs:{label:"Название","label-for":"name","invalid-feedback":e.getValidationMessage(e.$v.formData.name)}},[t("b-form-input",{attrs:{id:"name",state:e.getFieldState(e.$v.formData.name)},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name","string"===typeof a?a.trim():a)},expression:"formData.name"}})],1)],1),t("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Основное изображение"}},[t("UploadedImage",{attrs:{image:e.formData.img_path},on:{imageInitialized:function(a){e.temp.previewImagePath=a}}}),t("b-form-group",{attrs:{"label-for":"img_path","invalid-feedback":e.getValidationMessage(e.$v.formData.img_path)}},[t("b-file",{attrs:{"browse-text":"Обзор...",id:"img_path",state:e.getFieldState(e.$v.formData.img_path)},scopedSlots:e._u([{key:"placeholder",fn:function(){return[e._v(" Нет файлов ")]},proxy:!0}]),model:{value:e.temp.previewImageModel,callback:function(a){e.$set(e.temp,"previewImageModel",a)},expression:"temp.previewImageModel"}})],1)],1)],1),t("ConstructorActions",{attrs:{"cancel-to":{name:"admin.realtyType"},"is-create-page":e.isCreatePage},on:{submit:e.onSubmit}})],1)},i=[],n=t("d4ec"),o=t("bee2"),s=t("262e"),c=t("2caf"),m=(t("b0c0"),t("9ab4")),l=t("1b40"),u=t("bf19"),d=t("1dce"),p=t("c67c"),f=t("b5ae"),b=t("c3e5"),h=t("de84"),v=t("6fc5"),g=t("37c5"),y=t("0763"),w=function(e){Object(s["a"])(t,e);var a=Object(c["a"])(t);function t(){var e;return Object(n["a"])(this,t),e=a.apply(this,arguments),e.entityName="типа недвижимости",e.formData={id:null,name:"",img_path:null},e.temp={previewImagePath:null,previewImageModel:null},e}return Object(o["a"])(t,[{key:"onSubmit",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$v.$touch(),this.$v.$invalid?Object(v["e"])(g["a"],this.$store).setData({title:"Ошибка валидации!",text:"Проверте корректность и запоолненость полей",variant:"danger"}):(this.isCreatePage?h["a"].create(this.formData).then((function(a){Object(v["e"])(g["a"],e.$store).setData({title:"Запись успешно создана",variant:"success"}),e.$router.push({name:"admin.realtyType.change",params:{id:a.data.id}})})):h["a"].update(this.formData).then((function(a){Object(v["e"])(g["a"],e.$store).setData({title:"Запись успешно изменена",variant:"success"}),e.updateFormData(a.data)})),a&&this.$router.push({name:"admin.realty"}))}},{key:"watchTempPreviewImageModel",value:function(e){e&&(this.formData.img_path=e)}},{key:"updateFormData",value:function(e){this.temp={previewImageModel:null,previewImagePath:e.img_path},this.formData={name:e.name,id:e.id,img_path:e.img_path}}},{key:"created",value:function(){var e=this;this.isCreatePage||h["a"].get({id:this.$route.params.id}).then((function(a){return e.updateFormData(a.data)}))}}]),t}(Object(l["c"])(d["validationMixin"],p["a"],u["a"]));Object(m["a"])([Object(l["g"])("temp.previewImageModel")],w.prototype,"watchTempPreviewImageModel",null),w=Object(m["a"])([Object(l["a"])({components:{UploadedImage:y["a"],ConstructorActions:b["a"]},validations:{formData:{name:{required:f["required"]},img_path:{required:f["required"]}}}})],w);var D=w,j=D,O=t("2877"),_=Object(O["a"])(j,r,i,!1,null,"347dd940",null);a["default"]=_.exports},de84:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var r=t("5530"),i=t("d4ec"),n=t("bee2"),o=t("262e"),s=t("2caf"),c=(t("b0c0"),t("d3b7"),t("3949"),t("c873")),m=t("72df"),l=function(e){Object(o["a"])(t,e);var a=Object(s["a"])(t);function t(e){var r;return Object(i["a"])(this,t),r=a.call(this),r.id=e.id,r.name=e.name,r}return Object(n["a"])(t,null,[{key:"get",value:function(e){return c["a"].get("realtyType/"+e.id,{params:e})}},{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c["a"].get("realtyType",{params:e})}},{key:"create",value:function(e){return c["a"].post("realtyType",t.prepareFormData(e))}},{key:"update",value:function(e){return c["a"].post("realtyType/"+e.id,t.prepareFormData(Object(r["a"])(Object(r["a"])({},e),{},{_method:"PUT"})))}},{key:"destroy",value:function(e){return c["a"].delete("realtyType",{params:{id:e}})}}]),t}(m["a"])}}]);
//# sourceMappingURL=chunk-019b0b44.e9ef316f.js.map